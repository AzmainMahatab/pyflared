{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  extends: ["config:base"],
  // Force Renovate to use 'fix:' and 'feat:' prefixes,
  // even if the repo history is empty.
  semanticCommits: "enabled",
  // --- 1. AUTOMATION SETTINGS ---
  automerge: true,
  //  platformAutomerge: true,
  automergeStrategy: "squash",
  rebaseWhen: "behind-base-branch",
  stopUpdatingLabel: "renovate-stop",
  // --- 2. CUSTOM MANAGERS ---
  customManagers: [
    {
      customType: "regex",
      fileMatch: ["^cloudflared\\.version$"],
      matchStrings: ["^(?<currentValue>\\d{4}\\.\\d+\\.\\d+)$"],
      datasourceTemplate: "github-releases",
      depNameTemplate: "cloudflare/cloudflared",
      versioningTemplate: "loose",
    },
  ],
  // --- 3. PACKAGE RULES ---
  packageRules: [
    // "fix" = Patch, "feat" = Minor, "chore" = Silence
    // RULE 1: Global Silence (Default to chore)
    {
      matchPackagePatterns: ["*"],
      semanticCommitType: "chore",
    },
    // RULE 2: Cloudflare Exception
    {
      matchDepNames: ["cloudflare/cloudflared"],
      semanticCommitType: "fix",
    },
    // RULE 3: Python (manual review required)
    {
      matchDepNames: ["python"],
      automerge: false,
    },
  ],
}
